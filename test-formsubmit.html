<!DOCTYPE html>
<html>
<head>
  <title>FormSubmit 测试</title>
</head>
<body>
  <h1>FormSubmit 测试表单</h1>
  <form id="test-form" action="https://formsubmit.co/el/gofilo" method="POST">
    <input type="hidden" name="_subject" value="测试邮件 - FormSubmit" />
    <input type="hidden" name="_captcha" value="false" />
    <input type="hidden" name="_template" value="table" />
    
    <label>测试邮箱：</label>
    <input type="email" name="email" value="test@example.com" required />
    
    <button type="submit">提交测试</button>
  </form>

  <h2>使用 fetch 测试</h2>
  <button onclick="testFetch()">测试 Fetch API</button>
  <div id="result"></div>

  <script>
    async function testFetch() {
      const formData = new FormData();
      formData.append('_subject', '测试邮件 - Fetch API');
      formData.append('_captcha', 'false');
      formData.append('_template', 'table');
      formData.append('email', 'test@example.com');
      formData.append('_next', window.location.href);

      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = '正在提交...';

      try {
        // 先尝试不使用 no-cors
        const response = await fetch('https://formsubmit.co/el/gofilo', {
          method: 'POST',
          body: formData
        });

        if (response.ok) {
          const text = await response.text();
          resultDiv.innerHTML = '✅ 成功！响应：<pre>' + text.substring(0, 500) + '</pre>';
        } else {
          resultDiv.innerHTML = '❌ 失败：状态码 ' + response.status;
        }
      } catch (error) {
        resultDiv.innerHTML = '❌ 错误：' + error.message + '<br>尝试使用 no-cors 模式...';
        
        // 如果失败，尝试 no-cors
        try {
          await fetch('https://formsubmit.co/el/gofilo', {
            method: 'POST',
            mode: 'no-cors',
            body: formData
          });
          resultDiv.innerHTML += '<br>✅ no-cors 模式已发送（无法确认是否成功）';
        } catch (e) {
          resultDiv.innerHTML += '<br>❌ no-cors 也失败：' + e.message;
        }
      }
    }

    // 测试表单提交
    document.getElementById('test-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      
      try {
        const response = await fetch('https://formsubmit.co/el/gofilo', {
          method: 'POST',
          body: formData
        });
        
        const resultDiv = document.getElementById('result');
        if (response.ok) {
          const text = await response.text();
          resultDiv.innerHTML = '✅ 表单提交成功！响应：<pre>' + text.substring(0, 500) + '</pre>';
        } else {
          resultDiv.innerHTML = '❌ 表单提交失败：状态码 ' + response.status;
        }
      } catch (error) {
        document.getElementById('result').innerHTML = '❌ 错误：' + error.message;
      }
    });
  </script>
</body>
</html>








